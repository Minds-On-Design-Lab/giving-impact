function FastClick(a,b){"use strict";function c(a,b){return function(){return a.apply(b,arguments)}}var d;if(b=b||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=b.touchBoundary||10,this.layer=a,this.tapDelay=b.tapDelay||200,!FastClick.notNeeded(a)){for(var e=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],f=this,g=0,h=e.length;h>g;g++)f[e[g]]=c(f[e[g]],f);deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(d=a.onclick,a.addEventListener("click",function(a){d(a)},!1),a.onclick=null)}}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),deviceIsBlackBerry10=navigator.userAgent.indexOf("BB10")>0;FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){"use strict";return deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(a){"use strict";var b;deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!deviceIsIOS4){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},FastClick.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.sendClick(g,a),deviceIsIOS&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b,c,d;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(deviceIsBlackBerry10&&(d=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),d[1]>=10&&d[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction?!0:!1},FastClick.attach=function(a,b){"use strict";return new FastClick(a,b)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;
$(document).foundation(),function(a){a(function(){0!=a('[data-action="remove-opp-supporter"]').length&&a('[data-action="remove-opp-supporter"]').on("click",function(b){b.preventDefault();var c=a(this).attr("href");if(confirm("Are you sure you want to remove this supporter?")){var d=a("<form></form>").attr("method","post").attr("action",c).append(a("<input />").attr("type","hidden").attr("name","s").val(1));a("body").append(d),d.submit()}})}),a(function(){a('[name="currency"]').length&&a('[name="currency"]').on("change",function(b){var c=a(this).val().toUpperCase();confirm("You selected "+c+". Once selected, your currency cannot be changed. Are you sure you want to select this currency?")&&a(this).parents("form").first().submit()})}),a(function(){a("#container-donation-levels").length&&(1==a('input[name="levels"]:checked').val()?a("#container-donation-levels").show():a("#container-donation-levels").hide(),a('input[name="levels"]').change(function(b){return 1==a(this).val()?void a("#container-donation-levels").show():void a("#container-donation-levels").hide()}))}),a(function(){0!=a('[name="send_receipt"]').length&&(0==a('input[name="send_receipt"]:checked').val()&&a("#container-reciept-settings").hide(),a('[name="send_receipt"]').click(function(b){return a(this).prop("checked")&&1==a(this).val()?void a("#container-reciept-settings").show():void a("#container-reciept-settings").hide()}))}),a(function(){if(a("#custom-field-modal").length){a("body").on("click","#customFieldModal .close-reveal-modal",function(b){a("#customFieldModal").remove(),a(".reveal-modal-bg").remove()});var b=(a("#custom-field-modal"),Handlebars.compile(a("#custom-field-modal").html())),c=Handlebars.compile(a("#custom-field-row").html()),d=function(){var b={type:a("#customFieldModal").find('[data-field="type"]').val(),label:a("#customFieldModal").find('[data-field="label"]').val(),options:a("#customFieldModal").find('[data-field="options"]').val(),required:a("#customFieldModal").find('[data-field="required"]:checked').val(),id:a("#customFieldModal").find('[data-field="id"]').val(),options_formatted:[]};if(console.log(b),b.id||(b.status=!0),a(b.options.split(/(\n|\r)/)).each(function(){var a=this;a.replace(/(\n|\r)/g,"").length&&b.options_formatted.push({option:a})}),a("#customFieldModal").find('[data-field="required"]').prop("checked")&&(b.required=!0),a("#customFieldModal").data("track-row")){var d=a("#customFieldModal").data("track-row");d.find('[name="custom_field_types[]"]').val(b.type),d.find('[name="custom_field_labels[]"]').val(b.label),d.find('[name="custom_field_options[]"]').val(b.options),d.find('[name="custom_field_required[]"]').val(b.required),d.find('[data-field="label"]').text(b.label),d.find('[data-field="type"] span').text(b.type),d.find('[data-field="options"]').html(b.options.replace(/(\n|\r)/g,"<br>"))}else a("#custom-fields").append(a(c(b)))};a("body").on("change",'> #customFieldModal [data-field="type"]',function(){"text"==a(this).val()?a("#container-field-dropdown").hide():a("#container-field-dropdown").show()}),a("body").on("click","> #customFieldModal .success",function(b){b.preventDefault(),d(),a("#customFieldModal").remove(),a(".reveal-modal-bg").remove()}),a('[data-action="add-custom-field"]').click(function(c){c.preventDefault();var d={label:!1,options:!1,type:!1,required:!1};a("#scratch").append(a(b(d))),a("#customFieldModal").foundation("reveal","open"),a("#container-field-dropdown").hide()}),a("#custom-fields").on("click",'[data-action="hide-custom-field"]',function(b){b.preventDefault();var c=a(this).parents("tr").find('[name="custom_field_status[]"]');0!=c.val()?(c.val(0),a(this).parents("tr").addClass("field-disabled"),a(this).html('<i class="fa fa-times fa-lg action"></i>')):(c.val(1),a(this).parents("tr").removeClass("field-disabled"),a(this).html('<i class="fa fa-check fa-lg action"></i>'))}),a("#custom-fields").on("click",'[data-action="edit-custom-field"]',function(c){c.preventDefault();var d=a(this).parents("tr"),e={label:d.find('[data-field="label"]').text(),options:d.find('[name="custom_field_options[]"]').val(),type:d.find('[data-field="type"] span').text(),required:d.find('[name="custom_field_required[]"]').val(),id:d.find('[name="custom_field_ids[]"]').val()};a("#scratch").append(a(b(e))),a("#customFieldModal").find('[data-field="type"]').val(e.type),"text"==e.type&&a("#container-field-dropdown").hide(),e.required&&a("#custom-field-required").prop("checked",!0),a("#customFieldModal").data("track-row",d),a("#customFieldModal").foundation("reveal","open")})}}),a(function(){a("table").on("click",'[data-action="remove-row"]',function(b){b.preventDefault(),a(this).parents("tr").remove(),a(this).parents('tr input[name="level_statuses[]"]').val(0)}),a("table").on("click",'[data-action="add-row"]',function(b){b.preventDefault();var c=a("#"+a(this).attr("data-template")).html(),d=Handlebars.compile(c);a(d()).insertBefore(a(this).parents("tr"))})}),a(function(){0!=a("[data-minicolors]").length&&a("[data-minicolors]").minicolors()}),a(function(){a('[data-action="remove-image"]').length&&a('[data-action="remove-image"]').click(function(b){b.preventDefault(),a(this).parents("form").append(a("<input/>").attr("type","hidden").attr("value",1).attr("name","remove-image")),a("#campaign-image-thumb").remove(),a(this).remove()})}),a(function(){a("#form-signup").length&&a('[name="pass"], [name="pass2"]').blur(function(){a('[name="pass"]').val().length&&a('[name="pass2"]').val().length&&a('[name="pass"]').val()!=a('[name="pass2"]').val()?(a('[name="pass2"]').addClass("error"),a('[name="pass2"]').siblings("small").removeClass("hide")):(a('[name="pass2"]').removeClass("error"),a('[name="pass2"]').siblings("small").addClass("hide"))})}),a(function(){0!==a('[name="donation_level"]').length&&a('[name="donation_level"]').click(function(b){var c=a(this),d=a(".additional_donation_container").clone();a(".additional_donation_container").remove(),c.prop("checked")&&(d.insertAfter(a(c.parents().get(0))),d.find('[name="additional_donation"]').val(""))})}),a(function(){a("#form-donation-checkout").length&&(a('[name="cc_number"]').formatCardNumber(),a('[name="cc_cvc"]').formatCardCVC(),a('[name="cc_exp"]').formatCardExpiry(),a("#form-donation-checkout").submit(function(b){if(!a(this).find('[name="stripe_token"]').length){b.preventDefault(),a(this).find('input[type="submit"]').val("Please wait...").prop("disabled",!0);var c=function(){b.preventDefault(),a(this).find('input[type="submit"]').val("Checkout").prop("disabled",!1)}.bind(this);a("small.error").addClass("hide");var d=["first_name","last_name","street","city","postal","country","email","cc_number","cc_cvc","cc_exp"];window._gi_req_state&&d.push("state");var e=!1,f=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g;return a(d).each(function(b,d){var f=a('[name="'+d+'"]');return("text"!=f.attr("type")||f.val().length)&&("checkbox"!=f.attr("type")||f.prop("checked"))?void 0:(a('[data-field="'+d+'"]').removeClass("hide"),e=!0,c())}),a('[name="email"]').val().match(f)?moment().isAfter(moment(a('[name="cc_exp"]').val(),"MM / YYYY"),"month")?(a('[data-field="cc_exp"]').removeClass("hide"),a('[data-field="cc_exp"]').text("Your expiration date is invalid"),c()):void(e||(Stripe.setPublishableKey(a('[name="spk"]').val()),Stripe.createToken({number:a('[name="cc_number"]').val(),cvc:a('[name="cc_cvc"]').val(),exp_month:a('[name="cc_exp"]').val().substr(0,2),exp_year:a('[name="cc_exp"]').val().substr(5,4),name:a("#input-firstname").val()+" "+a("#input-lastname").val(),address_zip:a('[name="postal"]').val()},function(b,d){if(d.error)return"exp_year"==d.error.param?a('<small class="error">'+d.error.message+"</small>").insertAfter(a('[name="cc_exp"]')):"exp_month"==d.error.param?a('<small class="error">'+d.error.message+"</small>").insertAfter(a('[name="cc_exp"]')):"cvc"==d.error.param?a('<small class="error">'+d.error.message+"</small>").insertAfter(a('[name="cc_cvc"]')):a('<small class="error">'+d.error.message+"</small>").insertAfter(a('[name="cc_number"]')),c();a('[name="cc_number"], [name="cc_cvc"], [name="cc_month"], [name="cc_year"], [name="cc_name"], [name="cc_zip"]').remove();var e=d.id;a("#form-donation-checkout").append(a('<input type="hidden" value="'+e+'" name="stripe_token" />')),a("#form-donation-checkout").submit()}))):(e=!0,a('[data-field="email"]').removeClass("hide"),c())}}))}),a(function(){0!=a("#form-donation-donate").length&&a("#form-donation-donate").submit(function(b){a(this).find('input[type="submit"]').prop("disabled",!0).val("Please wait...")})}),a(function(){0!=a("#form-contact").length&&a("#form-contact #input_contact").change(function(b){var c=a(this).prop("checked"),d=a(this);c=c?1:0,a.post(a("#form-contact").attr("action"),{contact:c},function(b){a(".contact-notification").remove(),a("<span></span>").addClass("label success radius contact-notification").text("Contact preferences updated").insertAfter(d.parent()),setTimeout(function(){a(".contact-notification").fadeOut()},5e3)})})})}(jQuery),logshare=function(a,b){var c=window.gi_base+"share/"+window.gi_campaign_id+"/log",d=!1;$("#input-donation-id").length&&(d=$("#input-donation-id").val()),$.post(c,{url:encodeURIComponent(b),type:a,donation:d},function(a){})},extractParamFromUri=function(a,b){if(a){var c=new RegExp("[\\?&#]"+b+"=([^&#]*)"),d=c.exec(a);return null!==d?unescape(d[1]):void 0}};