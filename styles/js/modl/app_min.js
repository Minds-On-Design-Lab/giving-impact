$(document).foundation(),function(a){a(function(){0!=a('[data-action="remove-opp-supporter"]').length&&a('[data-action="remove-opp-supporter"]').on("click",function(b){b.preventDefault();var c=a(this).attr("href");if(confirm("Are you sure you want to remove this supporter?")){var d=a("<form></form>").attr("method","post").attr("action",c).append(a("<input />").attr("type","hidden").attr("name","s").val(1));a("body").append(d),d.submit()}})}),a(function(){a('[name="currency"]').length&&a('[name="currency"]').on("change",function(b){var c=a(this).val().toUpperCase();confirm("You selected "+c+". Once selected, your currency cannot be changed. Are you sure you want to select this currency?")&&a(this).parents("form").first().submit()})}),a(function(){a("#container-donation-levels").length&&(1==a('input[name="levels"]:checked').val()?a("#container-donation-levels").show():a("#container-donation-levels").hide(),a('input[name="levels"]').change(function(b){return 1==a(this).val()?void a("#container-donation-levels").show():void a("#container-donation-levels").hide()}))}),a(function(){0!=a('[name="send_receipt"]').length&&(0==a('input[name="send_receipt"]:checked').val()&&a("#container-reciept-settings").hide(),a('[name="send_receipt"]').click(function(b){return a(this).prop("checked")&&1==a(this).val()?void a("#container-reciept-settings").show():void a("#container-reciept-settings").hide()}))}),a(function(){if(a("#custom-field-modal").length){a("body").on("click","#customFieldModal .close-reveal-modal",function(b){a("#customFieldModal").remove(),a(".reveal-modal-bg").remove()});var b=(a("#custom-field-modal"),Handlebars.compile(a("#custom-field-modal").html())),c=Handlebars.compile(a("#custom-field-row").html()),d=function(){var b={type:a("#customFieldModal").find('[data-field="type"]').val(),label:a("#customFieldModal").find('[data-field="label"]').val(),options:a("#customFieldModal").find('[data-field="options"]').val(),required:a("#customFieldModal").find('[data-field="required"]:checked').val(),id:a("#customFieldModal").find('[data-field="id"]').val(),options_formatted:[]};if(console.log(b),b.id||(b.status=!0),a(b.options.split(/(\n|\r)/)).each(function(){var a=this;a.replace(/(\n|\r)/g,"").length&&b.options_formatted.push({option:a})}),a("#customFieldModal").find('[data-field="required"]').prop("checked")&&(b.required=!0),a("#customFieldModal").data("track-row")){var d=a("#customFieldModal").data("track-row");d.find('[name="custom_field_types[]"]').val(b.type),d.find('[name="custom_field_labels[]"]').val(b.label),d.find('[name="custom_field_options[]"]').val(b.options),d.find('[name="custom_field_required[]"]').val(b.required),d.find('[data-field="label"]').text(b.label),d.find('[data-field="type"] span').text(b.type),d.find('[data-field="options"]').html(b.options.replace(/(\n|\r)/g,"<br>"))}else a("#custom-fields").append(a(c(b)))};a("body").on("change",'> #customFieldModal [data-field="type"]',function(){"text"==a(this).val()?a("#container-field-dropdown").hide():a("#container-field-dropdown").show()}),a("body").on("click","> #customFieldModal .success",function(b){b.preventDefault(),d(),a("#customFieldModal").remove(),a(".reveal-modal-bg").remove()}),a('[data-action="add-custom-field"]').click(function(c){c.preventDefault();var d={label:!1,options:!1,type:!1,required:!1};a("#scratch").append(a(b(d))),a("#customFieldModal").foundation("reveal","open"),a("#container-field-dropdown").hide()}),a("#custom-fields").on("click",'[data-action="hide-custom-field"]',function(b){b.preventDefault();var c=a(this).parents("tr").find('[name="custom_field_status[]"]');0!=c.val()?(c.val(0),a(this).parents("tr").addClass("field-disabled"),a(this).html('<i class="fa fa-times fa-lg action"></i>')):(c.val(1),a(this).parents("tr").removeClass("field-disabled"),a(this).html('<i class="fa fa-check fa-lg action"></i>'))}),a("#custom-fields").on("click",'[data-action="edit-custom-field"]',function(c){c.preventDefault();var d=a(this).parents("tr"),e={label:d.find('[data-field="label"]').text(),options:d.find('[name="custom_field_options[]"]').val(),type:d.find('[data-field="type"] span').text(),required:d.find('[name="custom_field_required[]"]').val(),id:d.find('[name="custom_field_ids[]"]').val()};a("#scratch").append(a(b(e))),a("#customFieldModal").find('[data-field="type"]').val(e.type),"text"==e.type&&a("#container-field-dropdown").hide(),e.required&&a("#custom-field-required").prop("checked",!0),a("#customFieldModal").data("track-row",d),a("#customFieldModal").foundation("reveal","open")})}}),a(function(){a("table").on("click",'[data-action="remove-row"]',function(b){b.preventDefault(),a(this).parents("tr").remove(),a(this).parents('tr input[name="level_statuses[]"]').val(0)}),a("table").on("click",'[data-action="add-row"]',function(b){b.preventDefault();var c=a("#"+a(this).attr("data-template")).html(),d=Handlebars.compile(c);a(d()).insertBefore(a(this).parents("tr"))})}),a(function(){0!=a("[data-minicolors]").length&&a("[data-minicolors]").minicolors()}),a(function(){a('[data-action="remove-image"]').length&&a('[data-action="remove-image"]').click(function(b){b.preventDefault(),a(this).parents("form").append(a("<input/>").attr("type","hidden").attr("value",1).attr("name","remove-image")),a("#campaign-image-thumb").remove(),a(this).remove()})}),a(function(){a("#form-signup").length&&a('[name="pass"], [name="pass2"]').blur(function(){a('[name="pass"]').val().length&&a('[name="pass2"]').val().length&&a('[name="pass"]').val()!=a('[name="pass2"]').val()?(a('[name="pass2"]').addClass("error"),a('[name="pass2"]').siblings("small").removeClass("hide")):(a('[name="pass2"]').removeClass("error"),a('[name="pass2"]').siblings("small").addClass("hide"))})}),a(function(){0!==a('[name="donation_level"]').length&&a('[name="donation_level"]').click(function(b){var c=a(this),d=a(".additional_donation_container").clone();a(".additional_donation_container").remove(),c.prop("checked")&&(d.insertAfter(a(c.parents().get(0))),d.find('[name="additional_donation"]').val(""))})}),a(function(){a("#form-donation-checkout").length&&(a('[name="cc_number"]').formatCardNumber(),a('[name="cc_cvc"]').formatCardCVC(),a('[name="cc_exp"]').formatCardExpiry(),a("#form-donation-checkout").submit(function(b){if(!a(this).find('[name="stripe_token"]').length){b.preventDefault(),a(this).find('input[type="submit"]').val("Please wait...").prop("disabled",!0);var c=function(){b.preventDefault(),a(this).find('input[type="submit"]').val("Checkout").prop("disabled",!1)}.bind(this);a("small.error").addClass("hide");var d=["first_name","last_name","street","city","postal","country","email","cc_number","cc_cvc","cc_exp"];window._gi_req_state&&d.push("state");var e=!1,f=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g;return a(d).each(function(b,d){var f=a('[name="'+d+'"]');return("text"!=f.attr("type")||f.val().length)&&("checkbox"!=f.attr("type")||f.prop("checked"))?void 0:(a('[data-field="'+d+'"]').removeClass("hide"),e=!0,c())}),a('[name="email"]').val().match(f)?moment().isAfter(moment(a('[name="cc_exp"]').val(),"MM / YYYY"),"month")?(a('[data-field="cc_exp"]').removeClass("hide"),a('[data-field="cc_exp"]').text("Your expiration date is invalid"),c()):void(e||(Stripe.setPublishableKey(a('[name="spk"]').val()),Stripe.createToken({number:a('[name="cc_number"]').val(),cvc:a('[name="cc_cvc"]').val(),exp_month:a('[name="cc_exp"]').val().substr(0,2),exp_year:a('[name="cc_exp"]').val().substr(5,4),name:a("#input-firstname").val()+" "+a("#input-lastname").val(),address_zip:a('[name="postal"]').val()},function(b,d){if(d.error)return"exp_year"==d.error.param?a('<small class="error">'+d.error.message+"</small>").insertAfter(a('[name="cc_exp"]')):"exp_month"==d.error.param?a('<small class="error">'+d.error.message+"</small>").insertAfter(a('[name="cc_exp"]')):"cvc"==d.error.param?a('<small class="error">'+d.error.message+"</small>").insertAfter(a('[name="cc_cvc"]')):a('<small class="error">'+d.error.message+"</small>").insertAfter(a('[name="cc_number"]')),c();a('[name="cc_number"], [name="cc_cvc"], [name="cc_month"], [name="cc_year"], [name="cc_name"], [name="cc_zip"]').remove();var e=d.id;a("#form-donation-checkout").append(a('<input type="hidden" value="'+e+'" name="stripe_token" />')),a("#form-donation-checkout").submit()}))):(e=!0,a('[data-field="email"]').removeClass("hide"),c())}}))}),a(function(){0!=a("#form-donation-donate").length&&a("#form-donation-donate").submit(function(b){a(this).find('input[type="submit"]').prop("disabled",!0).val("Please wait...")})}),a(function(){0!=a("#form-contact").length&&a("#form-contact #input_contact").change(function(b){var c=a(this).prop("checked"),d=a(this);c=c?1:0,a.post(a("#form-contact").attr("action"),{contact:c},function(b){a(".contact-notification").remove(),a("<span></span>").addClass("label success radius contact-notification").text("Contact preferences updated").insertAfter(d.parent()),setTimeout(function(){a(".contact-notification").fadeOut()},5e3)})})}),a(function(){0!=a('[name="frequency"]').length&&0!=a('[name="interval"]').length&&("onetime"!=a('[name="frequency"]').val()&&a('[name="frequency"]').val()||a('[name="interval"]').parents(".row").first().css("display","none"),a('[name="frequency"]').on("change",function(b){a(this).val()&&"onetime"!=a(this).val()?a('[name="interval"]').parents(".row").first().css("display","block"):a('[name="interval"]').parents(".row").first().css("display","none")}))})}(jQuery),logshare=function(a,b){var c=window.gi_base+"share/"+window.gi_campaign_id+"/log",d=!1;$("#input-donation-id").length&&(d=$("#input-donation-id").val()),$.post(c,{url:encodeURIComponent(b),type:a,donation:d},function(a){})},extractParamFromUri=function(a,b){if(a){var c=new RegExp("[\\?&#]"+b+"=([^&#]*)"),d=c.exec(a);return null!==d?unescape(d[1]):void 0}};